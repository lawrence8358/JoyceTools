<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>潮汐資料提取器</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-" crossorigin="anonymous">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity=""
    crossorigin="anonymous">
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <h4 class="mb-2"><img src="icons/icon48.png" alt="icon" class="app-icon"> 潮汐資料提取器</h4>

  <div class="mb-2 small text-muted">當前頁面: <span id="currentUrl">-</span></div>

  <!-- Tabs -->
  <ul class="nav nav-tabs" id="mainTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="extract-tab" data-bs-toggle="tab" data-bs-target="#extract" type="button"
        role="tab"><i class="fa-solid fa-water me-1"></i><span class="tab-label">提取</span></button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button"
        role="tab"><i class="fa-solid fa-gear me-1"></i><span class="tab-label">設定</span></button>
    </li>
  </ul>
  <div class="tab-content mt-3">
    <div class="tab-pane fade show active" id="extract" role="tabpanel">

      <div class="mb-2">
        <label for="location" class="form-label">選擇地點</label>
        <select id="location" class="form-select form-select-sm">
          <option value="Sydney">Sydney (雪梨)</option>
          <option value="Chennai">Chennai (清奈)</option>
          <option value="IndianOcean">Indian Ocean (印度洋)</option>
          <option value="Tokyo">Tokyo (東京)</option>
        </select>
      </div>
      <div class="mb-2">
        <label for="apiUrl" class="form-label">API 網址</label>
        <input type="text" id="apiUrl" class="form-control form-control-sm" placeholder="http://localhost:5000">
      </div>

      <div class="d-flex gap-2 mb-2 equal-width">
        <button id="goToUrlBtn" class="btn btn-sm btn-aux">🔗 前往網站</button>
        <button id="copyUrlBtn" class="btn btn-sm btn-aux">📋 複製網址</button>
      </div>

      <div class="d-grid gap-2 mb-2">
        <button id="reloadPageBtn" class="btn btn-sm btn-warning">🔄 重新整理頁面</button>
      </div>

      <div class="d-flex gap-2 mb-2 equal-width">
        <button id="extractAllBtn" class="btn btn-sm btn-main">📦 一次提取全部地點</button>
        <button id="uploadBtn" class="btn btn-sm btn-backup" disabled>⬆️ 上傳到資料庫</button>
      </div>

      <div class="d-flex gap-2 mb-2 equal-width">
        <button id="extractBtn" class="btn btn-sm btn-main">📄 提取當前頁面資料</button>
        <button id="downloadBtn" class="btn btn-sm btn-backup" disabled>⬇️ 下載 JSON 檔案</button>
      </div>

      <div id="status" class="mt-2"></div>

      <div class="card mt-2">
        <div class="card-body p-2 small">
          <strong>使用說明:</strong>
          <ol class="mb-0">
            <li>在潮汐網站打開對應地點頁面並完成 Cloudflare 驗證。</li>
            <li>點擊「提取當前頁面資料」或「一次提取全部地點」。</li>
            <li>提取完成後可下載 JSON 或上傳到 API。</li>
          </ol>
        </div>
      </div>

    </div>
    <div class="tab-pane fade" id="settings" role="tabpanel">  
      <div class="mb-2 small text-muted">未來會在此加入排程與進階設定。</div>
    </div>
  </div>

  <!-- 載入 Bootstrap JS (for tabs) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity=""
    crossorigin="anonymous"></script>

  <!-- 載入所有 JavaScript 模組 -->
  <script src="config.js"></script>
  <script src="storage.js"></script>
  <script src="ui.js"></script>
  <script src="api.js"></script>
  <script src="extractor.js"></script>
  <script src="popup.js"></script>
</body>

</html>